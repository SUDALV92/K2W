<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>i = 0;
phase = 0;
drawText = false;
drawSkipText = false;
global.extraClear = true;
global.lastRunEnd[15] = global.time;
if(global.lastRunStart[15] != -1)
{
 var clearTime = global.lastRunEnd[15] - global.lastRunStart[15];
 if(global.bestRun[15] == -1 || global.bestRun[15] &gt; clearTime)
         global.bestRun[15] = clearTime;
}
audio_play_sound(global.sndExtraExplosion,0,0);
cameraFollowPlayer = false;
var t = floor(global.time);
    time = "";
    time += string(t div 3600) + ":";
    t = t mod 3600;
    time += string(t div 600);
    t = t mod 600;
    time += string(t div 60) + ":";
    t = t mod 60;
    time += string(t div 10);
    t = t mod 10;
    time += string(t);
text = "All cleared!#
Thank you for playing!#
Total deaths: " + string(global.death) + "#
Total time: " + string(time)+"#
Extra stage idea, coding and visual effects: SUDALV#
Extra stage platforming: Maxim_new_2001#
Extra stage boss and code helping: Arche
";

oldRNG = 0;
newRNG = 0;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(instance_exists(objPlayerDoll))
{
    switch(phase)
    {
        case 0:
            if(i == 0)
            {
                objPlayerDoll.sprite = sprPlayerFall;
                objPlayerDoll.vspeed = -17;
                objPlayerDoll.hspeed = 3;
                with(objExtraShake)
                {
                    alarm[0] = 1;
                }
            }
            if(objPlayerDoll.vspeed == 0)
            {
                objPlayerDoll.sprite = 0;
                objPlayerDoll.hspeed = 0;
                phase = 1;
            }
            
            break;
        case 1:
            if(objPlayerDoll.x &gt;= 1344)
            {
                objPlayerDoll.hspeed = 0;
                objPlayerDoll.sprite = sprPlayerIdle;
                with(objExtraShake)
                {
                 instance_destroy();
                }
            }
            else 
            {
                objPlayerDoll.hspeed = 3;
            }
                        
            if(i == 320)
            {
                audio_play_sound(global.sndClear,0,0);                
            }
            if(i == 400)
            {
             msg=instance_create(view_xview[0] + 400,view_yview[0] + 130,objNumberMessage);
             msg.sprite_index = sprExtra;
             msg.a = 1;
            }
            if(i == 460)
            {             
             msg = instance_create(view_xview[0] + 400,view_yview[0] + 264,objStageMessage);
            }
            if(i == 520)
            {
             msg = instance_create(view_xview[0] + 400,view_yview[0] + 410,objClearMessage);
            }
            if(i &gt; 600 &amp;&amp; i &lt; 1000)
            {
                drawText = true;
                if(!audio_is_playing(global.sndRelax))
                {
                    audio_play_sound(global.sndRelax,0,1);
                }
                background_alpha[0] -= 0.01;
                with(objStar)
                {
                    image_alpha -= 0.01;
                    if(image_alpha &lt;= 0.1)
                    {
                        instance_destroy();
                    }
                }
                
            }
            if(i &gt; 700)
            {
             if(view_yview[0] &gt; 0)
             {
              view_yview[0]-=0.5;
             }
             else
             {
              if(!drawSkipText)
              {
               drawSkipText = true;
               star = instance_create(view_xview[0] + irandom_range(10,200),-20,objStar);
               star.direction = irandom_range(300,320);
               star.speed = 5;
               star.blend = true;
              }
              if(scrButtonCheckPressed(global.skipButton))
              {
               global.autosave = true;
               audio_stop_all();
               global.currentSegmentIndex = -1;
               room_goto(rPortal);
              }
             }             
            }
            if(i mod 100 == 0)
            {
             do 
             {
              newRNG = irandom_range(100,550);
             }
             until(abs(newRNG - oldRNG) &gt; 100);
             cloud = instance_create(view_xview[0] -100,newRNG,objExtraCloud);
             cloud.hspeed = 2;
             oldRNG = newRNG;
            }
            break;
    }
    i++;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(drawText)
{
    draw_set_font(fDefault18);
    draw_set_halign(fa_center);
    scrDrawTextOutline(view_xview + 400,50,text,c_white,c_black);
    //draw_text(view_xview + 400,50,text);
}
if(drawSkipText)
{
 draw_set_font(fDefault18);
 draw_set_halign(fa_right);
 if (!global.controllerMode)
 {
    scrDrawTextOutline(view_xview[0] + view_wview[0] - 40, view_yview[0] + view_hview[0] - 40, "Press "+scrGetKeybind(global.skipButton[0])+" to enter Portal room",c_white,c_black);
 }
 else
 {
    scrDrawTextOutline(view_xview[0] + view_wview[0] - 40, view_yview[0] + view_hview[0] - 40, "Press "+scrGetControllerBind(global.skipButton[1])+" to enter Portal room",c_white,c_black);   
 }
 //draw_text(view_xview[0] + view_wview[0] - 40, view_yview[0] + view_hview[0] - 40,"Press 'Skip' key to enter Portal room");
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
