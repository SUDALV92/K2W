<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sprExtraStageBloodFestivalMiku</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>1000001</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>t = 0;
state = 0;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(!instance_exists(objPlayer)) exit;

if(t == 30)
{
 targetX = random_range(-32,0);
 for(var i = 0; i &lt;= 12; i++)
 {
  apple = instance_create(targetX,16,objExtraStageBloodFestivalApple);
  apple.targetX = targetX+i*64;
  apple.mode = 1;
  apple.direction = 0;
 }
}
if(t == 150) //shoot wall and spawn another wall
{
 with(objExtraStageBloodFestivalApple)
 {
  if(state == 0)
  {
   direction = 270;
   targetY = 560;
   state = 1;
  }
 }
 targetY = random_range(-32,0);
 for(var i = 0; i &lt;= 9; i++)
 {
  apple = instance_create(784,targetY,objExtraStageBloodFestivalApple);
  apple.targetY = targetY+i*64;
  apple.mode = 1;
  apple.direction = 270;
 }
}
if(t == 280)
{
 with(objExtraStageBloodFestivalApple)
 {
  if(state == 0)
  {
   direction = 180;
   targetX = 50;
   state = 1;
  }
 }
 targetX = random_range(800,832);
 for(var i = 0; i &lt;= 12; i++)
 {
  apple = instance_create(targetX,592,objExtraStageBloodFestivalApple);
  apple.targetX = targetX-i*64;
  apple.mode = 1;
  apple.direction = 180;
 }
}
if(t == 410)
{
 with(objExtraStageBloodFestivalApple)
 {
  if(state == 0)
  {
   direction = 90;
   targetY = 50;
   state = 1;
  }
 }
 targetY = random_range(608,640);
 for(var i = 0; i &lt;= 9; i++)
 {
  apple = instance_create(16,targetY,objExtraStageBloodFestivalApple);
  apple.targetY = targetY-i*64;
  apple.mode = 1;
  apple.direction = 90;
 }
}
if(t == 540)
{
 with(objExtraStageBloodFestivalApple)
 {
  if(state == 0)
  {
   direction = 0;
   targetX = 754;
   state = 1;
  }
 }
}
if(t &gt;= 740 &amp;&amp; t &lt; 1100 &amp;&amp; t % 10 == 0)
{
 apple = instance_create(irandom_range(0,800),-16,objExtraStageBloodFestivalApple);
 apple.direction = random_range(180,360);
 apple.curving = 1;
 apple.speed = 5;
 apple.friction = 0.02;
 apple.sprite_index = scrRandomAppleColor();
 
 apple = instance_create(irandom_range(0,800),624,objExtraStageBloodFestivalApple);
 apple.direction = random_range(0,180);
 apple.curving = -1;
 apple.speed = 5;
 apple.friction = 0.02;
 apple.sprite_index = scrRandomAppleColor();
 
 apple = instance_create(-16,irandom_range(0,608),objExtraStageBloodFestivalApple);
 apple.direction = random_range(90,270);
 apple.curving = 1;
 apple.speed = 5;
 apple.friction = 0.02;
 apple.sprite_index = scrRandomAppleColor();
 
 apple = instance_create(816,irandom_range(0,608),objExtraStageBloodFestivalApple);
 apple.direction = random_range(270,450);
 apple.curving = -1;
 apple.speed = 5;
 apple.friction = 0.02;
 apple.sprite_index = scrRandomAppleColor();
}
if(t == 1120)
{
 with(objExtraStageBloodFestivalApple)
 {
  curving = 0;
  friction = 0;
  move_towards_point(800,0,1);
 }
}
if(t == 1260)
{
 with(objExtraStageBloodFestivalApple)
 {
  direction = point_direction(800,0,x,y);
  speed = 10;
 }
}

if(t &gt;= 1330 &amp;&amp; t &lt; 1420 &amp;&amp; t % 10 == 0) //горизонтальные, вертикальные, диагональные
{
 apple = instance_create(832,irandom_range(16,592),objExtraStageBloodFestivalApple);
 apple.hspeed = -random_range(5,10);
 apple.sprite_index = scrRandomAppleColor();
 
 apple = instance_create(-32,irandom_range(16,592),objExtraStageBloodFestivalApple);
 apple.hspeed = random_range(5,10);
 apple.sprite_index = scrRandomAppleColor();
}
if(t == 1420)
{
 with(objExtraStageBloodFestivalApple)
 {
  speed = 0;
 }
}
if(t &gt;= 1420 &amp;&amp; t &lt; 1560 &amp;&amp; t % 10 == 0)
{
 apple = instance_create(irandom_range(16,784),-32,objExtraStageBloodFestivalApple);
 apple.vspeed = random_range(5,10);
 apple.sprite_index = scrRandomAppleColor();
 
 apple = instance_create(irandom_range(16,784),640,objExtraStageBloodFestivalApple);
 apple.vspeed = -random_range(5,10);
 apple.sprite_index = scrRandomAppleColor();
}
if(t == 1560)
{
 with(objExtraStageBloodFestivalApple)
 {
  speed = 0;
 }
}
if(t &gt;= 1560 &amp;&amp; t &lt; 1690 &amp;&amp; t % 5 == 0)
{
 apple = instance_create(irandom_range(16,900),640,objExtraStageBloodFestivalApple);
 apple.direction = 135;
 apple.speed = random_range(5,10);
 apple.sprite_index = scrRandomAppleColor();
 
 apple = instance_create(832,irandom_range(16,700),objExtraStageBloodFestivalApple);
 apple.direction = 135;
 apple.hspeed = random_range(5,10);
 apple.sprite_index = scrRandomAppleColor();
}
if(t == 1690)
{
 with(objExtraStageBloodFestivalApple)
 {
  speed = 0;
 }
}
if(t &gt;= 1690 &amp;&amp; t &lt; 1750 &amp;&amp; t % 5 == 0)
{
 apple = instance_create(irandom_range(16,900),-32,objExtraStageBloodFestivalApple);
 apple.direction = 225;
 apple.speed = random_range(5,10);
 apple.sprite_index = scrRandomAppleColor();
 
 apple = instance_create(832,irandom_range(16,700),objExtraStageBloodFestivalApple);
 apple.direction = 225;
 apple.hspeed = random_range(5,10);
 apple.sprite_index = scrRandomAppleColor();
}
if(t == 1760)
{
 with(objExtraStageBloodFestivalApple)
 {
  hspeed = -5;
  vspeed = 0;
 }
}
if(t == 1770)
{
 with(objExtraStageBloodFestivalApple)
 {
  hspeed = 0;
  vspeed = -5;
 }
}
if(t == 1780)
{
 with(objExtraStageBloodFestivalApple)
 {
  hspeed = 5;
  vspeed = 0;
 }
}
if(t == 1790)
{
 with(objExtraStageBloodFestivalApple)
 {
  hspeed = 0;
  vspeed = 7;
 }
}
if(t &gt;= 1820 &amp;&amp; t &lt; 2690 &amp;&amp; t % 20 == 0) //наводка с торможением
{
 big = instance_create(864,irandom_range(100,500),objExtraStageBloodFestivalBigApple); 
 big.direction = random_range(160,200);
 big.speed = 6;
}
if(t == 2760)
{
 with(objExtraStageBloodFestivalApple)
 {
  speed = 0;
  friction = 0;
  mode = 0;
  sprite_index = sprGrayCherry;
  vspeed = 3;
 }
}
if(t &gt;= 3050 &amp;&amp; t &lt; 3555 &amp;&amp; t % 5 == 0) //начало бла-бла-бла, атака с оригинала
{
 apple = instance_create(irandom(800),8,objExtraStageBloodFestivalApple);
 apple.sprite_index = scrRandomAppleColor();
 apple.alarm[2] = 30;
 apple.vspeed = 7;
 apple.mode = 3;
}
if(t &gt;= 3555 &amp;&amp; t &lt; 3755 &amp;&amp; t % 5 == 0)
{
 apple = instance_create(780,irandom(608),objExtraStageBloodFestivalApple);
 apple.sprite_index = scrRandomAppleColor();
 apple.alarm[2] = 30;
 apple.hspeed = -7;
 apple.mode = 4;
}
if(t &gt;= 3755 &amp;&amp; t &lt; 4020 &amp;&amp; t % 5 == 0)
{
 apple = instance_create(irandom(800),596,objExtraStageBloodFestivalApple);
 apple.sprite_index = scrRandomAppleColor();
 apple.alarm[2] = 30;
 apple.vspeed = -7;
 apple.mode = 4;
}
if(t &gt;= 4060 &amp;&amp; t &lt; 4350 &amp;&amp; choose(0,1,2,3) != 0) //серые яблоки из мику
{
 angle = 0;
 repeat(5)
 {
  apple = instance_create(x,y,objExtraStageBloodFestivalApple);
  apple.direction = random_range(angle+state*14.4,angle+(state+1)*14.4);
  apple.speed = 8;
  angle+=72;
 }
 state++;
 if(state &gt; 5)
  state = 0;
}
if(t &gt;= 4380 &amp;&amp; t &lt; 4600 &amp;&amp; t % 2 == 0) //зелёная наводка
{
 apple = instance_create(x-145+84,y-70+245,objExtraStageBloodFestivalApple);
 apple.sprite_index = sprGreenCherry;
 apple.direction = point_direction(apple.x,apple.y,objPlayer.x,objPlayer.y);
 apple.speed = 10;
 
 apple = instance_create(x-145+184,y-70+245,objExtraStageBloodFestivalApple);
 apple.sprite_index = sprGreenCherry;
 apple.direction = point_direction(apple.x,apple.y,objPlayer.x,objPlayer.y);
 apple.speed = 10;
}
if(t &gt;= 4650 &amp;&amp; t &lt; 4900 &amp;&amp; t % 4 == 0) //горизонтальные с диагональю
{
 apple = instance_create(832,irandom_range(-100,700),objExtraStageBloodFestivalApple);
 apple.sprite_index = scrRandomAppleColor();
 apple.hspeed = -8;
 apple.vspeed = -random_range(1,2);
 
 apple = instance_create(-32,irandom_range(-100,700),objExtraStageBloodFestivalApple);
 apple.sprite_index = scrRandomAppleColor();
 apple.hspeed = 8;
 apple.vspeed = random_range(1,2);
}
if(t == 4900)
{
 with(objExtraStageBloodFestivalApple)
 {
  direction = point_direction(objPlayer.x,objPlayer.y,x,y,);
  speed = 8;
 }
}
if(t &gt;= 4900 &amp;&amp; t &lt; 5150 &amp;&amp; t % 4 == 0) //вертикальные с диагональю
{
 apple = instance_create(irandom_range(-100,900),640,objExtraStageBloodFestivalApple);
 apple.sprite_index = scrRandomAppleColor();
 apple.hspeed = random_range(1,2);
 apple.vspeed = -8;
 
 apple = instance_create(irandom_range(-100,900),-32,objExtraStageBloodFestivalApple);
 apple.sprite_index = scrRandomAppleColor();
 apple.hspeed = -random_range(1,2);
 apple.vspeed = 8;
}
if(t == 5150)
{
 with(objExtraStageBloodFestivalApple)
 {
  direction = point_direction(objPlayer.x,objPlayer.y,x,y,);
  speed = 8;
 }
}
if(t &gt;= 5170 &amp;&amp; t &lt; 5400 &amp;&amp; t % 10 == 0)
{
  apple = instance_create(irandom_range(64,128),640,objExtraStageBloodFestivalApple);
  apple.direction = 95;
  apple.speed = 15;
  apple.mode = 5;
  
  apple = instance_create(irandom_range(678,736),640,objExtraStageBloodFestivalApple);
  apple.direction = 85;
  apple.speed = 15;
  apple.mode = 5;
}
if(t &gt;= 5450 &amp;&amp; t &lt; 5700 &amp;&amp; t % 10 == 0)
{
  apple = instance_create(832,irandom_range(64,128),objExtraStageBloodFestivalApple);
  apple.direction = 225;
  apple.speed = 15;
  apple.mode = 6;
  
  apple = instance_create(832,irandom_range(480,544),objExtraStageBloodFestivalApple);
  apple.direction = 135;
  apple.speed = 15;
  apple.mode = 6;
}
if(t == 5700)
{
 with(objExtraStageBloodFestivalApple)
 {
  outsideDelete = true;
 }
 core = instance_create(400,304,objExtraStageBloodFestivalCore);
 dirDelta = 1;
}
if(t &gt;= 5700 &amp;&amp; t &lt; 5750)
{
 with(core)
 {
  apple1.image_alpha += 0.02;
  apple2.image_alpha += 0.02;
  apple3.image_alpha += 0.02;
  apple4.image_alpha += 0.02;
  len -= 6;
  dir += other.dirDelta;
 }
 if(dirDelta &lt; 15)
  dirDelta+=0.4;
}
if(t == 5850)
{
 dirDelta = 15;
}
if(t &gt;= 5750 &amp;&amp; t &lt; 5990)
{ 
 with(core)
 {
  dir += other.dirDelta;
  if(other.t % 3 == 0)
  {
      apple = instance_create(apple1.x,apple1.y,objExtraStageBloodFestivalApple);
      apple.direction = dir-90+random_range(-30,30);
      apple.speed = 7;
      apple.sprite_index = scrRandomAppleColor();
      
      apple = instance_create(apple2.x,apple2.y,objExtraStageBloodFestivalApple);
      apple.direction = dir+90-90+random_range(-30,30);
      apple.speed = 7;
      apple.sprite_index = scrRandomAppleColor();
      
      apple = instance_create(apple3.x,apple3.y,objExtraStageBloodFestivalApple);
      apple.direction = dir+180-90+random_range(-30,30);
      apple.speed = 7;
      apple.sprite_index = scrRandomAppleColor();
      
      apple = instance_create(apple4.x,apple4.y,objExtraStageBloodFestivalApple);
      apple.direction = dir+270-90+random_range(-30,30);
      apple.speed = 7;
      apple.sprite_index = scrRandomAppleColor();
  }
 }
}
if(t &gt;= 5970 &amp;&amp; t &lt; 6020)
{
 with(core)
 {
  dir += other.dirDelta;
 }
 dirDelta -= 3/5;
}
if(t &gt;= 6000 &amp;&amp; t &lt; 6250)
{
 with(core)
 {
  dir += other.dirDelta;
  if(other.t % 3 == 0)
  {
      apple = instance_create(apple1.x,apple1.y,objExtraStageBloodFestivalApple);
      apple.direction = dir+90+random_range(-30,30);
      apple.speed = 7;
      apple.sprite_index = scrRandomAppleColor();
      
      apple = instance_create(apple2.x,apple2.y,objExtraStageBloodFestivalApple);
      apple.direction = dir+90+90+random_range(-30,30);
      apple.speed = 7;
      apple.sprite_index = scrRandomAppleColor();
      
      apple = instance_create(apple3.x,apple3.y,objExtraStageBloodFestivalApple);
      apple.direction = dir+180+90+random_range(-30,30);
      apple.speed = 7;
      apple.sprite_index = scrRandomAppleColor();
      
      apple = instance_create(apple4.x,apple4.y,objExtraStageBloodFestivalApple);
      apple.direction = dir+270+90+random_range(-30,30);
      apple.speed = 7;
      apple.sprite_index = scrRandomAppleColor();
  }
 }
}
if(t &gt;= 6130 &amp;&amp; t &lt; 6250)
{
 with(core)
 {
  len -= 1;
 }
 if(t == 6245)
 {
  with(objExtraStageBloodFestivalApple)
  {
   if(mode == 7)
   {
    blend = true;
   }
  }
 }
}
if(t == 6250)
{
 instance_destroy(core);
 with(objExtraStageBloodFestivalApple)
 {
  if(mode == 7)
  {
   instance_destroy();
  }
 }
 repeat(50)
 {
  apple = instance_create(400,304,objExtraStageBloodFestivalApple);
  apple.sprite_index = scrRandomAppleColor();
  apple.direction = random(360);
  apple.image_xscale = random_range(0.4,1.05);
  apple.image_yscale = apple.image_xscale;
  apple.speed = random_range(3,5);
 }
}
t++;
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Sync
if( abs( audio_sound_get_track_position(global.currentMusic) * 50 - t ) &gt; 10 ) 
{     
 audio_sound_set_track_position(global.currentMusic, t/50);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>draw_text(50,50,string(t));
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
