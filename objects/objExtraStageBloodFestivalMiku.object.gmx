<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sprExtraStageBloodFestivalMiku</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>1000001</depth>
  <persistent>0</persistent>
  <parentName>objPlayerKiller</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>t = 0;
realT = 0;
state = 0;
practice = false;
angle = 0;
rotateAngle = 0;
scrPlayMusic(global.sndBokuBoku,0);
audio_sound_set_track_position( global.currentMusic, 0 );
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(!instance_exists(objPlayer)) exit;
if(t == 30)
{
 targetX = random_range(-32,0);
 for(var i = 0; i &lt;= 12; i++)
 {
  apple = instance_create(targetX,16,objExtraStageBloodFestivalApple);
  apple.targetX = targetX+i*64;
  apple.mode = 1;
  apple.tag = 0;
  apple.direction = 0;
 }
}
if(t == 150) //shoot wall and spawn another wall
{
 with(objExtraStageBloodFestivalApple)
 {
  if(state == 0)
  {
   direction = 270;
   targetY = 560;
   state = 1;
  }
 }
 targetY = random_range(-32,0);
 for(var i = 0; i &lt;= 8; i++)
 {
  apple = instance_create(784,targetY,objExtraStageBloodFestivalApple);
  apple.targetY = targetY+i*72;
  apple.mode = 1;
  apple.tag = 1;
  apple.direction = 270;
 }
}
if(t == 280)
{
 with(objExtraStageBloodFestivalApple)
 {
  if(state == 0)
  {
   direction = 180;
   targetX = 50;
   state = 1;
  }
 }
 targetX = random_range(800,832);
 for(var i = 0; i &lt;= 12; i++)
 {
  apple = instance_create(targetX,592,objExtraStageBloodFestivalApple);
  apple.targetX = targetX-i*64;
  apple.mode = 1;
  apple.tag = 2;
  apple.direction = 180;
 }
}
if(t == 410)
{
 with(objExtraStageBloodFestivalApple)
 {
  if(state == 0)
  {
   direction = 90;
   targetY = 50;
   state = 1;
  }
 }
 targetY = random_range(608,640);
 for(var i = 0; i &lt;= 8; i++)
 {
  apple = instance_create(16,targetY,objExtraStageBloodFestivalApple);
  apple.targetY = targetY-i*72;
  apple.mode = 1;
  apple.tag = 3;
  apple.direction = 90;
 }
}
if(t == 540)
{
 with(objExtraStageBloodFestivalApple)
 {
  if(state == 0)
  {
   direction = 0;
   targetX = 754;
   state = 1;
  }
 }
}
if(t &lt;= 730 &amp;&amp; t % 5 == 0)
{
    var count = 0;
    var chosenID = noone;
    with(objExtraStageBloodFestivalApple) 
    {
        if(mode != 0 &amp;&amp; state == 1 &amp;&amp; speed &gt; 1 &amp;&amp; distance_to_object(objPlayer) &gt; 50) 
        {
            if(irandom(count) == 0) 
            {
                chosenID = id
            }
            count++
        }
    }
    with(chosenID) 
    {
        apple = instance_create(x,y,objExtraStageBloodFestivalApple);
        apple.mode = 0;
        apple.state = 1;
        apple.gravity_direction = random(360);
        apple.gravity = 0.040;
        apple.image_xscale = 0.7;
        apple.image_yscale = 0.7;
        apple.outsideDelete = true;
        
        if(vspeed != 0)
        {
         apple = instance_nearest(800-x,y,objExtraStageBloodFestivalApple);         
        }
        else
        {
         apple = instance_nearest(x,608-y,objExtraStageBloodFestivalApple);
        }
         with(apple)
         {
            if(distance_to_object(objPlayer) &gt; 50)
            {
                apple = instance_create(x,y,objExtraStageBloodFestivalApple);
                apple.mode = 0;
                apple.state = 1;
                apple.gravity_direction = random(360);
                apple.gravity = 0.025;
                apple.image_xscale = 0.7;
                apple.image_yscale = 0.7;
                apple.outsideDelete = true;
            }
         }
    }
    
}
if(t == 740 || (t &gt;= 740 &amp;&amp; t &lt; 1100 &amp;&amp; t % 12 == 0))
{
 apple = instance_create(irandom_range(0,800),-16,objExtraStageBloodFestivalApple);
 apple.direction = random_range(180,360);
 apple.curving = 1;
 apple.speed = random_range(2,6);
 apple.friction = 0.008;
 apple.sprite_index = scrRandomAppleColor();
 
 apple = instance_create(irandom_range(0,800),624,objExtraStageBloodFestivalApple);
 apple.direction = random_range(0,180);
 apple.curving = -1;
 apple.speed = random_range(2,6);
 apple.friction = 0.008;
 apple.sprite_index = scrRandomAppleColor();
 
 apple = instance_create(-16,irandom_range(0,608),objExtraStageBloodFestivalApple);
 apple.direction = random_range(270,450);
 apple.curving = 1;
 apple.speed = random_range(2,6);
 apple.friction = 0.008;
 apple.sprite_index = scrRandomAppleColor();
 
 apple = instance_create(816,irandom_range(0,608),objExtraStageBloodFestivalApple);
 apple.direction = random_range(90,270);
 apple.curving = -1;
 apple.speed = random_range(2,6);
 apple.friction = 0.008;
 apple.sprite_index = scrRandomAppleColor();
}
if(t == 1120)
{
 with(objExtraStageBloodFestivalApple)
 {
  mode = 0;
  curving = 0;
  friction = 0;
  move_towards_point(objPlayer.x,objPlayer.y,1);
 }
}
if(t == 1260)
{
 with(objExtraStageBloodFestivalApple)
 {
  direction = point_direction(objPlayer.x,objPlayer.y,x,y);
  speed = 12;
 }
}

if(t &gt;= 1330 &amp;&amp; t &lt; 1420 &amp;&amp; t % 10 == 0) //горизонтальные, вертикальные, диагональные
{
 apple = instance_create(832,irandom_range(16,592),objExtraStageBloodFestivalApple);
 apple.hspeed = -random_range(5,10);
 apple.sprite_index = scrRandomAppleColor();
 
 apple = instance_create(-32,irandom_range(16,592),objExtraStageBloodFestivalApple);
 apple.hspeed = random_range(5,10);
 apple.sprite_index = scrRandomAppleColor();
}
if(t == 1420)
{
 with(objExtraStageBloodFestivalApple)
 {
  speed = 0;
 }
}
if(t &gt;= 1420 &amp;&amp; t &lt; 1560 &amp;&amp; t % 10 == 0)
{
 apple = instance_create(irandom_range(16,784),-32,objExtraStageBloodFestivalApple);
 apple.vspeed = random_range(5,10);
 apple.sprite_index = scrRandomAppleColor();
 
 apple = instance_create(irandom_range(16,784),640,objExtraStageBloodFestivalApple);
 apple.vspeed = -random_range(5,10);
 apple.sprite_index = scrRandomAppleColor();
}
if(t == 1560)
{
 with(objExtraStageBloodFestivalApple)
 {
  speed = 0;
 }
}
if(t &gt;= 1560 &amp;&amp; t &lt; 1690 &amp;&amp; t % 5 == 0)
{
 apple = instance_create(irandom_range(16,900),640,objExtraStageBloodFestivalApple);
 apple.direction = 135;
 apple.speed = random_range(5,10);
 apple.sprite_index = scrRandomAppleColor();
 
 apple = instance_create(832,irandom_range(16,700),objExtraStageBloodFestivalApple);
 apple.direction = 135;
 apple.hspeed = random_range(5,10);
 apple.sprite_index = scrRandomAppleColor();
}
if(t == 1690)
{
 with(objExtraStageBloodFestivalApple)
 {
  speed = 0;
 }
}
if(t &gt;= 1690 &amp;&amp; t &lt; 1750 &amp;&amp; t % 5 == 0)
{
 apple = instance_create(irandom_range(16,900),-32,objExtraStageBloodFestivalApple);
 apple.direction = 225;
 apple.speed = random_range(5,10);
 apple.sprite_index = scrRandomAppleColor();
 
 apple = instance_create(832,irandom_range(16,700),objExtraStageBloodFestivalApple);
 apple.direction = 225;
 apple.hspeed = random_range(5,10);
 apple.sprite_index = scrRandomAppleColor();
}
if(t == 1760)
{
 with(objExtraStageBloodFestivalApple)
 {
  hspeed = -5;
  vspeed = 0;
 }
}
if(t == 1770)
{
 with(objExtraStageBloodFestivalApple)
 {
  hspeed = 0;
  vspeed = -5;
 }
}
if(t == 1780)
{
 with(objExtraStageBloodFestivalApple)
 {
  hspeed = 5;
  vspeed = 0;
 }
}
if(t == 1790)
{
 with(objExtraStageBloodFestivalApple)
 {
  hspeed = 0;
  vspeed = 7;
 }
}
if(t &gt;= 1820 &amp;&amp; t &lt; 2690 &amp;&amp; t % 20 == 0) //наводка с торможением
{
 big = instance_create(864,irandom_range(100,500),objExtraStageBloodFestivalBigApple); 
 big.direction = random_range(160,200);
 big.speed = 6;
}
if(t == 2760)
{
 with(objExtraStageBloodFestivalApple)
 {
  speed = 0;
  friction = 0;
  mode = 0;
  sprite_index = sprGrayCherry;
  vspeed = 3;
  scrObjectDestroy(trail);
  alarm[4] = 1;
 }
}
if(t &gt;= 3050 &amp;&amp; t &lt; 3555 &amp;&amp; t % 5 == 0) //начало бла-бла-бла, атака с оригинала
{
 apple = instance_create(irandom(800),8,objExtraStageBloodFestivalApple);
 apple.sprite_index = scrRandomAppleColor();
 apple.alarm[2] = 30;
 apple.vspeed = 7;
 apple.mode = 3;
}
if(t &gt;= 3555 &amp;&amp; t &lt; 3755 &amp;&amp; t % 5 == 0)
{
 apple = instance_create(780,irandom(608),objExtraStageBloodFestivalApple);
 apple.sprite_index = scrRandomAppleColor();
 apple.alarm[2] = 30;
 apple.hspeed = -7;
 apple.mode = 4;
}
if(t &gt;= 3755 &amp;&amp; t &lt; 4020 &amp;&amp; t % 5 == 0)
{
 apple = instance_create(irandom(800),596,objExtraStageBloodFestivalApple);
 apple.sprite_index = scrRandomAppleColor();
 apple.alarm[2] = 30;
 apple.vspeed = -7;
 apple.mode = 4;
}
if(t &gt;= 4060 &amp;&amp; t &lt; 4350) //серые яблоки из мику
{
 angle = 0;
 repeat(3)
 {
  apple = instance_create(x,y,objExtraStageBloodFestivalApple);
  apple.direction = rotateAngle + random_range(angle+state*24,angle+(state+1)*24);
  apple.speed = 8;
  angle+=110;
 }
 rotateAngle += 40;
 state++;
 if(state &gt; 3)
  state = 0;
}
if(t &gt;= 4380 &amp;&amp; t &lt; 4600 &amp;&amp; t % 2 == 0) //зелёная наводка
{
 apple = instance_create(x-145+84,y-70+245,objExtraStageBloodFestivalApple);
 apple.sprite_index = sprGreenCherry;
 apple.direction = point_direction(apple.x,apple.y,objPlayer.x,objPlayer.y);
 apple.speed = 10;
 
 apple = instance_create(x-145+184,y-70+245,objExtraStageBloodFestivalApple);
 apple.sprite_index = sprGreenCherry;
 apple.direction = point_direction(apple.x,apple.y,objPlayer.x,objPlayer.y);
 apple.speed = 10;
}
if(t &gt;= 4650 &amp;&amp; t &lt; 4900 &amp;&amp; t % 6 == 0) //горизонтальные с диагональю
{
 apple = instance_create(832,irandom_range(-100,700),objExtraStageBloodFestivalApple);
 apple.sprite_index = scrRandomAppleColor();
 apple.image_xscale = 0.8;
 apple.image_yscale = 0.8;
 apple.hspeed = -8;
 apple.vspeed = -random_range(1,2);
 
 apple = instance_create(-32,irandom_range(-100,700),objExtraStageBloodFestivalApple);
 apple.sprite_index = scrRandomAppleColor();
 apple.image_xscale = 0.8;
 apple.image_yscale = 0.8;
 apple.hspeed = 8;
 apple.vspeed = random_range(1,2);
}
if(t == 4900)
{
 with(objExtraStageBloodFestivalApple)
 {
  direction = point_direction(objPlayer.x,objPlayer.y,x,y,);
  speed = 8;
 }
}
if(t &gt;= 4900 &amp;&amp; t &lt; 5150 &amp;&amp; t % 4 == 0) //вертикальные с диагональю
{
 apple = instance_create(irandom_range(-100,900),640,objExtraStageBloodFestivalApple);
 apple.sprite_index = scrRandomAppleColor();
 apple.image_xscale = 0.8;
 apple.image_yscale = 0.8;
 apple.hspeed = random_range(1,2);
 apple.vspeed = -8;
 
 apple = instance_create(irandom_range(-100,900),-32,objExtraStageBloodFestivalApple);
 apple.sprite_index = scrRandomAppleColor();
 apple.image_xscale = 0.8;
 apple.image_yscale = 0.8;
 apple.hspeed = -random_range(1,2);
 apple.vspeed = 8;
}
if(t == 5150)
{
 with(objExtraStageBloodFestivalApple)
 {
  direction = point_direction(objPlayer.x,objPlayer.y,x,y,);
  speed = 8;
 }
}
if(t &gt;= 5170 &amp;&amp; t &lt; 5400 &amp;&amp; t % 7 == 0)
{
  apple = instance_create(irandom_range(64,128),640,objExtraStageBloodFestivalApple);
  apple.direction = 95;
  apple.speed = 15;
  apple.mode = 5;
  
  apple = instance_create(irandom_range(678,736),640,objExtraStageBloodFestivalApple);
  apple.direction = 85;
  apple.speed = 15;
  apple.mode = 5;
}
if(t &gt;= 5450 &amp;&amp; t &lt; 5660 &amp;&amp; t % 10 == 0) //5630
{
  apple = instance_create(832,irandom_range(64,128),objExtraStageBloodFestivalApple);
  apple.direction = 225;
  apple.speed = 15;
  apple.mode = 6;
  
  apple = instance_create(832,irandom_range(480,544),objExtraStageBloodFestivalApple);
  apple.direction = 135;
  apple.speed = 15;
  apple.mode = 6;
}
if(t == 5700)
{
 with(objExtraStageBloodFestivalApple)
 {  
  outsideDelete = true;
 }
 core = instance_create(400,304,objExtraStageBloodFestivalCore);
 dirDelta = 1;
}
if(t &gt;= 5700 &amp;&amp; t &lt; 5750)
{
 with(core)
 {
  apple1.image_alpha += 0.02;
  apple2.image_alpha += 0.02;
  apple3.image_alpha += 0.02;
  apple4.image_alpha += 0.02;
  len -= 6;
  dir += other.dirDelta;
 }
 if(dirDelta &lt; 15)
  dirDelta+=0.4;
}
if(t == 5850)
{
 dirDelta = 15;
}
if(t &gt;= 5750 &amp;&amp; t &lt; 5990)
{ 
 with(core)
 {
  dir += other.dirDelta;
  if(other.t % 3 == 0)
  {
      apple = instance_create(apple1.x,apple1.y,objExtraStageBloodFestivalApple);
      apple.direction = dir-90+random_range(-30,30);
      apple.speed = 7;
      apple.sprite_index = scrRandomAppleColor();
      apple.image_xscale = 0.9;
      apple.image_yscale = 0.9;
      
      apple = instance_create(apple2.x,apple2.y,objExtraStageBloodFestivalApple);
      apple.direction = dir+90-90+random_range(-30,30);
      apple.speed = 7;
      apple.sprite_index = scrRandomAppleColor();
      apple.image_xscale = 0.9;
      apple.image_yscale = 0.9;
  }
  else if(other.t % 2 == 0)
  {
      apple = instance_create(apple3.x,apple3.y,objExtraStageBloodFestivalApple);
      apple.direction = dir+180-90+random_range(-30,30);
      apple.speed = 7;
      apple.sprite_index = scrRandomAppleColor();
      apple.image_xscale = 0.9;
      apple.image_yscale = 0.9;
      
      apple = instance_create(apple4.x,apple4.y,objExtraStageBloodFestivalApple);
      apple.direction = dir+270-90+random_range(-30,30);
      apple.speed = 7;
      apple.sprite_index = scrRandomAppleColor();
      apple.image_xscale = 0.9;
      apple.image_yscale = 0.9;
  }
 }
}
if(t &gt;= 5970 &amp;&amp; t &lt; 6020)
{
 with(core)
 {
  dir += other.dirDelta;
 }
 dirDelta -= 3/5;
}
if(t &gt;= 6000 &amp;&amp; t &lt; 6250)
{
 with(core)
 {
  dir += other.dirDelta;
  if(other.t % 2 == 0)
  {
      apple = instance_create(apple1.x,apple1.y,objExtraStageBloodFestivalApple);
      apple.direction = dir+90+random_range(-30,30);
      apple.speed = 7;
      apple.sprite_index = scrRandomAppleColor();
      apple.image_xscale = 0.9;
      apple.image_yscale = 0.9;
      
      apple = instance_create(apple2.x,apple2.y,objExtraStageBloodFestivalApple);
      apple.direction = dir+90+90+random_range(-30,30);
      apple.speed = 7;
      apple.sprite_index = scrRandomAppleColor();
      apple.image_xscale = 0.9;
      apple.image_yscale = 0.9;
  }
  else
  {
      apple = instance_create(apple3.x,apple3.y,objExtraStageBloodFestivalApple);
      apple.direction = dir+180+90+random_range(-30,30);
      apple.speed = 7;
      apple.sprite_index = scrRandomAppleColor();
      apple.image_xscale = 0.9;
      apple.image_yscale = 0.9;
      
      apple = instance_create(apple4.x,apple4.y,objExtraStageBloodFestivalApple);
      apple.direction = dir+270+90+random_range(-30,30);
      apple.speed = 7;
      apple.sprite_index = scrRandomAppleColor();
      apple.image_xscale = 0.9;
      apple.image_yscale = 0.9;
  }
 }
}
if(t &gt;= 6130 &amp;&amp; t &lt; 6250)
{
 with(core)
 {
  len -= 1;
 }
 if(t == 6245)
 {
  with(objExtraStageBloodFestivalApple)
  {
   if(mode == 7)
   {
    blend = true;
   }
  }
 }
}
if(t == 6250) //конец бла-бла-бла (взрыв)
{
 scrObjectDestroy(core);
 with(objExtraStageBloodFestivalApple)
 {
  if(mode == 7)
  {
   instance_destroy();
  }
 }
 repeat(50)
 {
  apple = instance_create(400,304,objExtraStageBloodFestivalApple);
  apple.sprite_index = scrRandomAppleColor();
  apple.direction = random(360);
  apple.image_xscale = random_range(0.6,1);
  apple.image_yscale = apple.image_xscale;
  apple.speed = random_range(3,6);
 }
}
if(t == 6480)
{
 apple = instance_create(x,y,objExtraStageBloodFestivalApple);
 apple.mode = 8;
 apple.sprite_index = scrRandomAppleColor();
 apple.alarm[3] = 10;
 apple.direction = point_direction(x,y,objPlayer.x,objPlayer.y)-30;
 apple.speed = 10;
 
 apple = instance_create(x,y,objExtraStageBloodFestivalApple);
 apple.mode = 8;
 apple.sprite_index = scrRandomAppleColor();
 apple.alarm[3] = 10;
 apple.direction = point_direction(x,y,objPlayer.x,objPlayer.y)+30;
 apple.speed = 10;
}
if(t == 6750)
{
 with(objExtraStageBloodFestivalApple)
 {
  mode = 8;
  state = 1;
  alarm[3] = 0;
  outsideDelete = true;
  direction = point_direction(objPlayer.x,objPlayer.y,x,y);
  speed = 4;
  gravity = 0;
 }
}
if(t == 6800)
{
 with(objExtraStageBloodFestivalApple)
 {
  speed = 0;
  outsideDelete = true;
  mode = 0;
  friction = 0;
 }
}
if(t == 6820)
{
 with(objExtraStageBloodFestivalApple)
 {
  angle = random(360);
  repeat(4)
  {
   apple = instance_create(x,y,objExtraStageBloodFestivalApple);
   apple.gravity_direction = angle;
   apple.gravity = 0.1;
   angle+=360/4;
  }
  instance_destroy();
 }
}
if(t == 6880)
{
 with(objExtraStageBloodFestivalApple)
 {
  gravity = 0;
  speed = 0;
 }
}
if(t == 6890)
{
 with(objExtraStageBloodFestivalApple)
 {
  if(y &gt; 576 || y &lt; 32 || x &lt; 32 || x &gt; 768)
   gravity_direction = point_direction(objPlayer.x,objPlayer.y,x,y);
  else
   gravity_direction = random(360);
  gravity = 0.1;
 }
}
if(t &gt;= 7050 &amp;&amp; t &lt;= 7500 &amp;&amp; t % 5 == 0)
{
 apple = instance_create(x,y,objExtraStageBloodFestivalApple);
 apple.mode = 9;
 apple.hspeed = -8;
 apple.vspeed = -10;
 apple.alarm[2] = irandom_range(10,70);
 apple.sprite_index = scrRandomAppleColor();
 
 apple = instance_create(x,y,objExtraStageBloodFestivalApple);
 apple.mode = 9;
 apple.hspeed = -8;
 apple.vspeed = 12;
 if(t % 10 == 0)
  apple.alarm[2] = irandom_range(10,70);
 else
  apple.mode = 0;
 apple.sprite_index = scrRandomAppleColor();
 
 apple = instance_create(x,y,objExtraStageBloodFestivalApple);
 apple.mode = 9;
 apple.hspeed = -8;
 apple.vspeed = -10;
 apple.alarm[2] = 80;
 apple.state = 1;
 apple.sprite_index = scrRandomAppleColor();
 
 apple = instance_create(x,y,objExtraStageBloodFestivalApple);
 apple.mode = 9;
 apple.hspeed = -8;
 apple.vspeed = 12;
 apple.alarm[2] = 80;
 apple.state = 1;
 apple.sprite_index = scrRandomAppleColor();
}
if(t &gt;= 7600 &amp;&amp; t &lt; 7780 &amp;&amp; t % 5 == 0) //закутки
{
 apple = instance_create(832,irandom(608),objExtraStageBloodFestivalApple);
 apple.mode = 10;
 apple.xspeed = -6;
 apple.hspeed = -6;
 apple.curving = 4;
 apple.sprite_index = scrRandomAppleColor();
}
if(t == 7830)
{
 state = 0;
}
if(t &gt; 7830 &amp;&amp; t &lt; 8050 &amp;&amp; t % 5 == 0)
{
 apple = instance_create(850,536,objExtraStageBloodFestivalApple);
 apple.mode = 11;
 apple.sprite_index = scrRandomAppleColor();
 apple.image_xscale = 0.8;
 apple.image_yscale = 0.8;
 apple.hspeed = -10;
 apple.state = 1;
 apple.alarm[0] = 50;
 if(state == 0 &amp;&amp; t % 20 == 0)
 {
  apple.alarm[2] = irandom_range(1,10); //jump
  state = -1;
 }
 
 apple = instance_create(850,72,objExtraStageBloodFestivalApple);
 apple.mode = 11;
 apple.sprite_index = scrRandomAppleColor();
 apple.image_xscale = 0.8;
 apple.image_yscale = 0.8;
 apple.hspeed = -10;
 apple.state = -1;
 apple.alarm[0] = 50;
 if(state == 1 &amp;&amp; t % 20 == 0)
 {
  apple.alarm[2] = irandom_range(1,10); //jump
  state = 0;
 }
 if(state == -1) //костыль, чтобы второе яблоко тут же не сработало
 {
  state = 1;
 }
}
if(t == 8050)
{
 with(objExtraStageBloodFestivalApple)
 {
  if(mode == 11 &amp;&amp; state == 1)
  {
   vspeed = 3;
  }
  if(mode == 11 &amp;&amp; state == -1)
  {
   vspeed = -3;
  }
 }
}
if(t &gt;= 8100 &amp;&amp; t &lt;= 8650 &amp;&amp; t % 4 == 0) //final
{
    apple = instance_create(820,irandom_range(40,140),objExtraStageBloodFestivalApple);
    apple.image_xscale = 2;
    apple.image_yscale = 2;
    apple.sprite_index = scrRandomAppleColor();
    apple.mode = 12;
    apple.alarm[2] = irandom_range(20,70);
    apple.hspeed = -10;
}
if(t == 8650)
{
 centerApple = instance_create(400,304,objExtraStageBloodFestivalApple);
 centerApple.image_xscale = 0;
 centerApple.image_yscale = 0;
 centerApple.sprite_index = scrRandomAppleColor();
 centerApple.depth = -1;
 centerApple.alarm[4] = 0;
}

if(t &gt;= 8650 &amp;&amp; t &lt; 8850)
{
 centerApple.image_xscale += 0.02;
 centerApple.image_yscale += 0.02;
 
}
if(t &gt;= 8850 &amp;&amp; t &lt; 8880)
{
 centerApple.image_xscale -= 0.1;
 centerApple.image_yscale -= 0.1;
 centerApple.blend = true;
}
if(t == 8880)
{
 scrObjectDestroy(centerApple);
 with(objExtraStageBloodFestivalApple)
 {
  direction = point_direction(400,304,x,y);
  speed = random_range(1,3);
  if(mode == 12)
   instance_destroy();
 }
 repeat(30)
 {
  apple = instance_create(irandom_range(395,405),irandom_range(299,309),objExtraStageBloodFestivalApple);
  apple.image_xscale = 0.5;
  apple.image_yscale = 0.5;
  apple.sprite_index = scrRandomAppleColor();
  apple.direction = random(360);
  apple.speed = random_range(1,4);
 }
 repeat(30)
 {
  apple = instance_create(irandom_range(390,410),irandom_range(294,314),objExtraStageBloodFestivalApple);
  apple.image_xscale = 0.5;
  apple.image_yscale = 0.5;
  apple.sprite_index = scrRandomAppleColor();
  apple.direction = random(360);
  apple.speed = random_range(1,4);
 }
 repeat(30)
 {
  apple = instance_create(irandom_range(395,415),irandom_range(289,319),objExtraStageBloodFestivalApple);
  apple.image_xscale = 0.5;
  apple.image_yscale = 0.5;
  apple.sprite_index = scrRandomAppleColor();
  apple.direction = random(360);
  apple.speed = random_range(1,4);
 }
}
if(t == 9100)
{
    if(!global.energy[98])
    {
      energy = instance_create(x,y,objEnergy);
      energy.energyID = 98;
      energy.direction = 170;
      energy.speed = 10;
      energy.friction = 0.2;
      energy.alarm[0] = 20;
      energy.active = true;
    }
    global.extraBossCleared[3] = 1;
    warp = instance_create(x,y,objWarp);
    warp.autosave = true;
    warp.roomTo = rExtraStageMaze;
    audio_play_sound(global.sndDeath,0,0);
    instance_destroy();
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Sync
scrAdvanceT(global.currentMusic);
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///practice
if(keyboard_check_pressed(ord('1')))
{
 scrObjectDestroy(objExtraStageBloodFestivalApple);
 t = 1330;
 practice = true;
}
if(keyboard_check_pressed(ord('2')))
{
 scrObjectDestroy(objExtraStageBloodFestivalApple);
 t = 3050;
 practice = true;
}
if(keyboard_check_pressed(ord('3')))
{
 scrObjectDestroy(objExtraStageBloodFestivalApple);
 t = 4650//4059;
 practice = true;
}
if(keyboard_check_pressed(ord('4')))
{
 scrObjectDestroy(objExtraStageBloodFestivalApple);
 t = 5450;
 practice = true;
}
if(keyboard_check_pressed(ord('5')))
{
 scrObjectDestroy(objExtraStageBloodFestivalApple);
 t = 8050;
 practice = true;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
